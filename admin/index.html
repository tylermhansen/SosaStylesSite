<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="robots" content="noindex" />
    <title>Sosa Studios â€” Content Manager</title>
  </head>
  <body>
    <script src="https://unpkg.com/decap-cms-app@latest"></script>
    <script>
      // Decap CMS with GitHub Personal Access Token
      // Prompts for token on first load, stores in localStorage
      document.addEventListener('DOMContentLoaded', () => {
        const getToken = () => {
          let token = localStorage.getItem('decap_github_token');
          if (!token) {
            token = prompt(
              'Enter your GitHub Personal Access Token\n\n' +
              'Create one at: https://github.com/settings/tokens\n' +
              'Scopes needed: repo, user:email\n\n' +
              'Token will be saved to localStorage (secure in your browser only)'
            );
            if (token) {
              localStorage.setItem('decap_github_token', token);
            }
          }
          return token;
        };

        // Register custom GitHub backend with token
        if (window.CMS) {
          window.CMS.registerBackend('github', window.DecapCmsBackendGithub);
          
          // Override token retrieval
          const token = getToken();
          if (token) {
            window.CMS.Backend.getBackend('github').authToken = token;
          }
        }
      });
    </script>
  </body>
</html>
